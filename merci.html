<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Merci - Podica</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background-color: #010c58;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
      padding: 30px;
    }
    #qr-container {
      margin-top: 20px;
    }
    #debug {
      margin-top: 30px;
      background-color: #fff;
      color: #000;
      padding: 20px;
      text-align: left;
      font-size: 14px;
      border-radius: 8px;
    }
  </style>
</head>

<body>

  <h1>üéâ Merci pour votre inscription !</h1>
  <p>Voici votre QR Code :</p>

  <div id="qr-container"></div>

  <div id="debug">
    <strong>üîç Diagnostic :</strong><br>
    <div id="params"></div>
    <div id="status"></div>
  </div>

  <script>
    function getParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name) || "";
    }

    const prenom = decodeURIComponent(getParam('prenom'));
    const nom = decodeURIComponent(getParam('nom'));
    const tel = decodeURIComponent(getParam('tel')).replace(/%20/g, ' ');
    const email = decodeURIComponent(getParam('email'));
    const pointure = decodeURIComponent(getParam('pointure'));
    const diabete = decodeURIComponent(getParam('diabete'));
    const pratiquesportive = decodeURIComponent(getParam('pratiquesportive'));
    const sportpratique = decodeURIComponent(getParam('sportpratique'));
    const dureehebdosport = decodeURIComponent(getParam('dureehebdosport'));

    const allParams = `
      Pr√©nom: ${prenom}<br>
      Nom: ${nom}<br>
      T√©l√©phone: ${tel}<br>
      Email: ${email}<br>
      Pointure: ${pointure}<br>
      Diab√®te: ${diabete}<br>
      Pratique sportive: ${pratiquesportive}<br>
      Sport pratiqu√©: ${sportpratique}<br>
      Dur√©e hebdomadaire sport: ${dureehebdosport}<br>
    `;
    document.getElementById("params").innerHTML = allParams;

    const qrContent = 
      `Nom: ${nom} | Pr√©nom: ${prenom} | T√©l√©phone: ${tel} | Email: ${email} | Pointure: ${pointure} | Diab√®te: ${diabete} | Pratique sportive: ${pratiquesportive} | Sport pratiqu√©: ${sportpratique} | Dur√©e hebdomadaire sport: ${dureehebdosport} heures`;

    if (prenom && nom && tel && email && pointure) {
      document.getElementById("status").innerHTML = "‚úÖ Donn√©es valides. G√©n√©ration du QR Code...";
      const img = document.createElement('img');
      img.src = "https://api.qrserver.com/v1/create-qr-code/?data=" + encodeURIComponent(qrContent) + "&size=200x200&color=ffffff&bgcolor=010c58";
      document.getElementById("qr-container").appendChild(img);
    } else {
      document.getElementById("status").innerHTML = "‚ùå Erreur : donn√©es manquantes, QR Code non g√©n√©r√©.";
    }
  </script>

</body>
</html>
