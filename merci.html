<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Merci - Podica</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="https://images.typeform.com/images/DgiqAc8r5Kd6/image/default" type="image/png">
  <style>
    body {
      background-color: #010c58;
      font-family: Arial, sans-serif;
      color: white;
      text-align: center;
      padding: 30px;
    }
    #qr-wrapper {
      background-color: white;
      border-radius: 20px;
      padding: 20px;
      display: inline-block;
      position: relative;
      margin-top: 20px;
    }
    #qr-code img {
      width: 200px;
      height: 200px;
      display: block;
    }
    #logo-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 50px;
      height: 50px;
      transform: translate(-50%, -50%);
      background: white;
      padding: 5px;
      border-radius: 10px;
    }
    #logo-overlay img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    #debug {
      margin-top: 30px;
      background-color: #5dade2; /* Bleu clair */
      color: black;
      padding: 20px;
      border-radius: 8px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    #debug strong {
      font-size: 20px;
      display: block;
      margin-bottom: 15px;
    }
    #params {
      text-align: left;
      font-size: 16px;
      margin-bottom: 15px;
    }
    #status {
      font-size: 18px;
      font-weight: bold;
      color: green;
    }
    .desktop-only {
      display: none;
    }
    .mobile-only {
      display: none;
    }
    @media (min-width: 601px) {
      .desktop-only {
        display: block;
      }
    }
    @media (max-width: 600px) {
      .mobile-only {
        display: block;
      }
    }
  </style>
</head>

<body>

<div class="desktop-only">
  <h1>üéâ F√©licitations !</h1>
</div>
<div class="mobile-only">
  <h1>üéâ Bravo !</h1>
</div>

<p>Il ne vous reste plus qu'√† pr√©senter ce QR Code √† notre op√©rateur conseil afin d'obtenir votre analyse Podica gratuite.</p>

<div id="qr-wrapper">
  <div id="qr-code"></div>
  <div id="logo-overlay">
    <img src="https://podica.odoo.com/web/image/1900-a0980bf6/podica_logo-vertical.webp" alt="Logo Podica">
  </div>
</div>

<div id="debug">
  <strong>Vos donn√©es √† la üîç :</strong>
  <div id="params"></div>
  <div id="status"></div>
</div>

<script>
  function getParam(name) {
    const params = new URLSearchParams(window.location.search);
    return params.get(name) || "";
  }

  const prenom = decodeURIComponent(getParam('prenom'));
  const nom = decodeURIComponent(getParam('nom'));
  const tel = decodeURIComponent(getParam('tel')).replace(/%20/g, ' ');
  const email = decodeURIComponent(getParam('email'));
  const pointure = decodeURIComponent(getParam('pointure'));
  const diabete = decodeURIComponent(getParam('diabete'));
  const sportpratique = decodeURIComponent(getParam('sportpratique'));
  const dureehebdosport = decodeURIComponent(getParam('dureehebdosport'));
  const zonesensouffrance = decodeURIComponent(getParam('zonesensouffrance'));
  const autresressenti = decodeURIComponent(getParam('autresressenti'));
  const premiereanalysepodica = decodeURIComponent(getParam('premiereanalysepodica'));

  const allParams = `
    Pr√©nom: ${prenom}<br>
    Nom: ${nom}<br>
    T√©l√©phone: ${tel}<br>
    Email: ${email}<br>
    Pointure: ${pointure}<br>
    Diab√®te: ${diabete}<br>
    Sport principal pratiqu√©: ${sportpratique}<br>
    Dur√©e hebdo sport: ${dureehebdosport} h/semaine<br>
    Zones sensibles: ${zonesensouffrance}<br>
    Autres ressentis: ${autresressenti}<br>
    Premi√®re analyse Podica: ${premiereanalysepodica}<br>
  `;
  document.getElementById("params").innerHTML = allParams;

  const qrContent = 
    `Nom: ${nom} | Pr√©nom: ${prenom} | T√©l√©phone: ${tel} | Email: ${email} | Pointure: ${pointure} | Diab√®te: ${diabete} | Sport pratiqu√©: ${sportpratique} | Dur√©e sport: ${dureehebdosport}h/semaine | Zones sensibles: ${zonesensouffrance} | Autres ressentis: ${autresressenti} | Premi√®re analyse Podica: ${premiereanalysepodica}`;

  if (prenom && nom && tel && email && pointure) {
    const img = document.createElement('img');
    img.src = "https://api.qrserver.com/v1/create-qr-code/?data=" + encodeURIComponent(qrContent) + "&size=200x200&color=ffffff&bgcolor=010c58";
    img.className = "qr-code";
    document.getElementById("qr-code").appendChild(img);
    document.getElementById("status").innerHTML = "QR Code g√©n√©r√© avec succ√®s! ‚úÖ";
  } else {
    document.getElementById("status").innerHTML = "‚ùå Erreur : donn√©es manquantes, QR Code non g√©n√©r√©.";
  }
</script>

</body>
</html>
